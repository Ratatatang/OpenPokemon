added exiting combat & capturing pokemon, and some code optimizations
